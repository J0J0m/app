<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Amor - Presentes Especiais</title>
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>

    <header class="store-header">
        <div class="cart-icon" title="Ver Carrinho" onclick="toggleCart()">
            💖 <span id="cart-counter" class="counter">0</span>
        </div>
        <h1>Meu Amor: Presentes Especiais</h1>
        <p>Encontre o presente perfeito para celebrar o amor.</p>
    </header>

    <div class="product-grid">

        <div class="product-card item-rosa">
            <div class="image-container">
                <img src="imagens/WhatsApp Image 2025-10-23 at 21.22.57.jpeg" alt="Presente 1" class="product-image">
            </div>
            <div class="product-info">
                <h3 class="product-name">camisa amor</h3>
                <p class="product-price">R$ 250,00</p>
                <button class="buy-button" 
                        onclick="addToCart(this)" 
                        data-name="camisa amor" 
                        data-price="250.00">COMPRAR</button>
            </div>
        </div>

        <div class="product-card item-azul">
            <div class="image-container">
                <img src="imagens/figura_b.jpg" alt="Presente 2" class="product-image">
            </div>
            <div class="product-info">
                <h3 class="product-name">Urso de Pelúcia Gigante</h3>
                <p class="product-price">R$ 199,90</p>
                <button class="buy-button" 
                        onclick="addToCart(this)" 
                        data-name="Urso de Pelúcia Gigante" 
                        data-price="199.90">COMPRAR</button>
            </div>
        </div>

        <div class="product-card item-rosa">
            <div class="image-container">
                <img src="imagens/figura_c.jpg" alt="Presente 3" class="product-image">
            </div>
            <div class="product-info">
                <h3 class="product-name">Caixa de Chocolates Premium</h3>
                <p class="product-price">R$ 310,50</p>
                <button class="buy-button" 
                        onclick="addToCart(this)" 
                        data-name="Caixa de Chocolates Premium" 
                        data-price="310.50">COMPRAR</button>
            </div>
        </div>

        <div class="product-card item-roxo">
            <div class="image-container">
                <img src="imagens/figura_d.jpg" alt="Presente 4" class="product-image">
            </div>
            <div class="product-info">
                <h3 class="product-name">Velas Aromáticas</h3>
                <p class="product-price">R$ 145,00</p>
                <button class="buy-button" 
                        onclick="addToCart(this)" 
                        data-name="Velas Aromáticas" 
                        data-price="145.00">COMPRAR</button>
            </div>
        </div>

        <div class="product-card item-azul">
            <div class="image-container">
                <img src="imagens/WhatsApp Image 2025-10-23 at 20.54.13.jpeg" alt="Presente 5" class="product-image">
            </div>
            <div class="product-info">
                <h3 class="product-name">caneca do meu amor</h3>
                <p class="product-price">R$ 275,00</p>
                <button class="buy-button" 
                        onclick="addToCart(this)" 
                        data-name="caneca do meu amor" 
                        data-price="275.00">COMPRAR</button>
            </div>
        </div>

        <div class="product-card item-roxo">
            <div class="image-container">
                <img src="imagens/figura_f.jpg" alt="Presente 6" class="product-image">
            </div>
            <div class="product-info">
                <h3 class="product-name">Álbum de Memórias</h3>
                <p class="product-price">R$ 200,00</p>
                <button class="buy-button" 
                        onclick="addToCart(this)" 
                        data-name="Álbum de Memórias" 
                        data-price="200.00">COMPRAR</button>
            </div>
        </div>

    </div>
    
    <div id="cart-panel" class="cart-panel">
        <h2>💖 Seu Carrinho 💖</h2>
        <button class="close-btn" onclick="toggleCart()">X</button>
        <ul id="cart-list" class="cart-list">
            <li class="empty-message">Nenhum presente especial aqui...</li>
        </ul>
        <div class="cart-footer">
            <p>Total: <span id="cart-total">R$ 0,00</span></p>
            <button class="checkout-btn">Finalizar Pedido</button>
        </div>
    </div>
    
    <script>
        // CÓDIGO JAVASCRIPT COMPLETO E FUNCIONAL

        // Variáveis que vão armazenar os elementos HTML
        let cartCount = 0;
        let cart = [];
        let cartCounterElement, cartListElement, cartTotalElement, cartPanelElement, cartIconElement;

        // Garante que o código só rode depois que o HTML estiver carregado
        window.onload = function() {
            // 1. Referências aos elementos HTML
            cartCounterElement = document.getElementById('cart-counter');
            cartListElement = document.getElementById('cart-list');
            cartTotalElement = document.getElementById('cart-total');
            cartPanelElement = document.getElementById('cart-panel');
            cartIconElement = document.querySelector('.cart-icon');
            
            // 2. Inicializa a exibição do carrinho
            updateCartDisplay();
        };

        /**
         * Adiciona um produto ao carrinho.
         * @param {HTMLElement} buttonElement - O botão clicado.
         */
        function addToCart(buttonElement) {
            const productName = buttonElement.getAttribute('data-name');
            const price = parseFloat(buttonElement.getAttribute('data-price')); 

            if (isNaN(price)) {
                console.error("Erro: Preço inválido no data-price para " + productName);
                return;
            }

            let found = cart.find(item => item.name === productName);

            if (found) {
                found.quantity++;
            } else {
                const newItem = { name: productName, price: price, quantity: 1 };
                cart.push(newItem);
            }

            updateCartDisplay();
            
            if (cartIconElement) {
                cartIconElement.classList.add('flash-cart');
                setTimeout(() => {
                    cartIconElement.classList.remove('flash-cart');
                }, 500);
            }
        }
        
        /**
         * Remove um produto do carrinho.
         */
        function removeFromCart(productName) {
             let itemIndex = cart.findIndex(item => item.name === productName);

            if (itemIndex > -1) {
                cart[itemIndex].quantity--;
                // Se a quantidade chegar a zero, remove o item da lista
                if (cart[itemIndex].quantity === 0) {
                    cart.splice(itemIndex, 1);
                }
            }
            updateCartDisplay();
        }

        /**
         * Atualiza o contador de itens e a lista de produtos no painel.
         */
        function updateCartDisplay() {
            let totalItems = 0;
            let totalPrice = 0;
            
            if (!cartListElement) return;

            cartListElement.innerHTML = ''; 

            if (cart.length === 0) {
                const li = document.createElement('li');
                li.className = 'empty-message';
                li.textContent = 'Nenhum presente especial aqui...';
                cartListElement.appendChild(li);
            } else {
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    
                    totalItems += item.quantity;
                    totalPrice += itemTotal;

                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span class="item-name">${item.name}</span>
                        <span class="item-details">
                            ${item.quantity} x R$ ${item.price.toFixed(2).replace('.', ',')} 
                        </span>
                        <button class="remove-btn" onclick="removeFromCart('${item.name}')">x</button>
                    `;
                    cartListElement.appendChild(li);
                });
            }

            if (cartCounterElement) cartCounterElement.textContent = totalItems;
            if (cartTotalElement) cartTotalElement.textContent = `R$ ${totalPrice.toFixed(2).replace('.', ',')}`;
        }

        /**
         * Abre e fecha o painel lateral do carrinho.
         */
        function toggleCart() {
            if (!cartPanelElement) return;
            
            cartPanelElement.classList.toggle('open');
            
            if (cartPanelElement.classList.contains('open')) {
                 updateCartDisplay();
            }
        }
    </script>
</body>
</html>